<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Turi Create: turi::csv_line_tokenizer Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turi Create
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structturi_1_1csv__line__tokenizer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structturi_1_1csv__line__tokenizer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">turi::csv_line_tokenizer Struct Reference<div class="ingroups"><a class="el" href="group__sframe__physical.html">SFrame : Physical</a> &raquo; <a class="el" href="group__csv__utils.html">CSV Parsing and Writing</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="csv__line__tokenizer_8hpp_source.html">core/storage/sframe_data/csv_line_tokenizer.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1566754654bbddf7efbf9b077f2f6af3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a1566754654bbddf7efbf9b077f2f6af3">csv_line_tokenizer</a> ()</td></tr>
<tr class="separator:a1566754654bbddf7efbf9b077f2f6af3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34a5fcf275ac80b0e474a29196d74de8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a34a5fcf275ac80b0e474a29196d74de8">init</a> ()</td></tr>
<tr class="separator:a34a5fcf275ac80b0e474a29196d74de8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ce0f06e5faf8ed46866e6be3f5350f7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a2ce0f06e5faf8ed46866e6be3f5350f7">tokenize_line</a> (const char *str, size_t len, std::vector&lt; std::string &gt; &amp;output)</td></tr>
<tr class="separator:a2ce0f06e5faf8ed46866e6be3f5350f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa376cd75c34ec2d110451b3264531854"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#aa376cd75c34ec2d110451b3264531854">tokenize_line</a> (const char *str, size_t len, std::function&lt; bool(std::string &amp;, size_t)&gt; fn)</td></tr>
<tr class="separator:aa376cd75c34ec2d110451b3264531854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35643bcd9ec71f78916182d6b6e4eb36"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a35643bcd9ec71f78916182d6b6e4eb36">tokenize_line</a> (char *str, size_t len, std::vector&lt; <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;output, bool permit_undefined, const std::vector&lt; size_t &gt; *output_order=nullptr)</td></tr>
<tr class="separator:a35643bcd9ec71f78916182d6b6e4eb36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2d1562bff94b47af0033f0e75c0f808"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#ae2d1562bff94b47af0033f0e75c0f808">parse_as</a> (char **buf, size_t len, const char *raw, size_t rawlen, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &amp;out, bool recursive_parse=false)</td></tr>
<tr class="separator:ae2d1562bff94b47af0033f0e75c0f808"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a241fcb0a3251da667f8e623aac97289b"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a241fcb0a3251da667f8e623aac97289b">get_last_parse_error_diagnosis</a> () const </td></tr>
<tr class="separator:a241fcb0a3251da667f8e623aac97289b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a1baea9f19cb4cedf1c18f1068cd1675b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a1baea9f19cb4cedf1c18f1068cd1675b">preserve_quoting</a> = false</td></tr>
<tr class="separator:a1baea9f19cb4cedf1c18f1068cd1675b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab300193d420d2fede5180471bd5cee3b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#ab300193d420d2fede5180471bd5cee3b">use_escape_char</a> = true</td></tr>
<tr class="separator:ab300193d420d2fede5180471bd5cee3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab22415e323a44191b6a729e72045272e"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#ab22415e323a44191b6a729e72045272e">escape_char</a> = '\\'</td></tr>
<tr class="separator:ab22415e323a44191b6a729e72045272e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a839eaf9c68ac8c72e0545c74e90ac197"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a839eaf9c68ac8c72e0545c74e90ac197">skip_initial_space</a> = true</td></tr>
<tr class="separator:a839eaf9c68ac8c72e0545c74e90ac197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae365a84b1ad0a090fba52c1745c11eec"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#ae365a84b1ad0a090fba52c1745c11eec">delimiter</a> = &quot;,&quot;</td></tr>
<tr class="separator:ae365a84b1ad0a090fba52c1745c11eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6144ccf11c60f894ee158b1056938a28"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a6144ccf11c60f894ee158b1056938a28">line_terminator</a> = &quot;\n&quot;</td></tr>
<tr class="separator:a6144ccf11c60f894ee158b1056938a28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a604e9d5d369f40c7b7b3858cbe2d6cbf"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a604e9d5d369f40c7b7b3858cbe2d6cbf">comment_char</a> = '#'</td></tr>
<tr class="separator:a604e9d5d369f40c7b7b3858cbe2d6cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a521b1a75c29eee5940f22eca6047238c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a521b1a75c29eee5940f22eca6047238c">has_comment_char</a> = true</td></tr>
<tr class="separator:a521b1a75c29eee5940f22eca6047238c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c6577567bdc0c46ee0fed2a6d7da3a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a12c6577567bdc0c46ee0fed2a6d7da3a">double_quote</a> = false</td></tr>
<tr class="separator:a12c6577567bdc0c46ee0fed2a6d7da3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a370510f1fee79093bbb8f3e4c9784aa6"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a370510f1fee79093bbb8f3e4c9784aa6">quote_char</a> = '\&quot;'</td></tr>
<tr class="separator:a370510f1fee79093bbb8f3e4c9784aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4ee9fe422e418cb3a5e6edc09514280"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#af4ee9fe422e418cb3a5e6edc09514280">na_values</a></td></tr>
<tr class="separator:af4ee9fe422e418cb3a5e6edc09514280"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4419fed8f27bbffd3a95213c76349e16"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a4419fed8f27bbffd3a95213c76349e16">true_values</a></td></tr>
<tr class="separator:a4419fed8f27bbffd3a95213c76349e16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015772eb0fdb2c26df69aa440964f267"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#a015772eb0fdb2c26df69aa440964f267">false_values</a></td></tr>
<tr class="separator:a015772eb0fdb2c26df69aa440964f267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf846b5d74d764338a030c57e96a49e7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1csv__line__tokenizer.html#aaf846b5d74d764338a030c57e96a49e7">only_raw_string_substitutions</a> = false</td></tr>
<tr class="separator:aaf846b5d74d764338a030c57e96a49e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CSV Line Tokenizer.</p>
<p>To use, simply set the appropriate options inside the struct, and use one of the tokenize_line functions to parse a line inside a CSV file.</p>
<dl class="section note"><dt>Note</dt><dd>This parser at the moment only handles the case where each row of the CSV is on one line. It is in fact very possible that this is not the case. Pandas in particular permits line breaks inside of quoted strings, and vectors, and that is quite problematic. </dd></dl>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00038">38</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1566754654bbddf7efbf9b077f2f6af3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">turi::csv_line_tokenizer::csv_line_tokenizer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor. Does nothing but set up internal buffers. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a241fcb0a3251da667f8e623aac97289b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; turi::csv_line_tokenizer::get_last_parse_error_diagnosis </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a printable string describing the parse error. This is only filled when <a class="el" href="structturi_1_1csv__line__tokenizer.html#a2ce0f06e5faf8ed46866e6be3f5350f7">tokenize_line</a> fails. The string is <em>not</em> cleared when tokenize line succeeds so this should not be used for flagging parse errors. </p>

</div>
</div>
<a class="anchor" id="a34a5fcf275ac80b0e474a29196d74de8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void turi::csv_line_tokenizer::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>called before any parsing functions are used. Initializes the spirit parser. </p>

</div>
</div>
<a class="anchor" id="ae2d1562bff94b47af0033f0e75c0f808"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool turi::csv_line_tokenizer::parse_as </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rawlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>recursive_parse</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Parse the buf content into <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a>. The type of the <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> is determined by the out variable.</p>
<p>If recursive_parse is set to true, things which parse to strings will attempt to be reparsed. This allows for instance the quoted element "123" to be parsed as an integer instead of a string.</p>
<p>If recursive_parse is true, the contents of the buffer may be modified (the buffer itself is used to maintain the recursive parse state) </p>

</div>
</div>
<a class="anchor" id="a2ce0f06e5faf8ed46866e6be3f5350f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool turi::csv_line_tokenizer::tokenize_line </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tokenize a single CSV line into seperate fields. The output vector will be cleared, and each field will be inserted into the output vector. Returns true on success and false on failure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>Pointer to string to tokenize. Contents of string may be modified. </td></tr>
    <tr><td class="paramname">len</td><td>Length of string to tokenize </td></tr>
    <tr><td class="paramname">output</td><td>Output vector which will contain the result</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="aa376cd75c34ec2d110451b3264531854"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool turi::csv_line_tokenizer::tokenize_line </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; bool(std::string &amp;, size_t)&gt;&#160;</td>
          <td class="paramname"><em>fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tokenize a single CSV line into seperate fields, calling a callback for each parsed token.</p>
<p>The function is of the form: </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> receive_token(<span class="keyword">const</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> len) {</div><div class="line">  <span class="comment">// add the first len bytes of the buffer as the parsed token</span></div><div class="line">  <span class="comment">// return true on success and false on failure.</span></div><div class="line"></div><div class="line">  <span class="comment">// if this function returns false, the tokenize_line call will also</span></div><div class="line">  <span class="comment">// return false</span></div><div class="line"></div><div class="line">  <span class="comment">// The buffer may be modified</span></div><div class="line">}</div></div><!-- fragment --><p>For instance, to insert the parsed tokens into an output vector, the following code could be used:</p>
<div class="fragment"><div class="line"><span class="keywordflow">return</span> <a class="code" href="structturi_1_1csv__line__tokenizer.html#a2ce0f06e5faf8ed46866e6be3f5350f7">tokenize_line</a>(str,</div><div class="line">                [&amp;](<span class="keyword">const</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">size_t</span> len)-&gt;<span class="keywordtype">bool</span> {</div><div class="line">                  output.emplace_back(buf, len);</div><div class="line">                  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">                });</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>Pointer to line to tokenize. Contents of string may be modified. </td></tr>
    <tr><td class="paramname">len</td><td>Length of line to tokenize </td></tr>
    <tr><td class="paramname">fn</td><td>Callback function which is called on every token</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a35643bcd9ec71f78916182d6b6e4eb36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t turi::csv_line_tokenizer::tokenize_line </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>permit_undefined</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; size_t &gt; *&#160;</td>
          <td class="paramname"><em>output_order</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tokenizes a line directly into array of <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> and type specifiers. This version of tokenize line is strict, requiring that the length of the output vector matches up exactly with the number of columns, and the types of the <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> be fully specified.</p>
<p>For instance: If my input line is </p><pre class="fragment">*     1, hello world, 2.0
* </pre><p>then output vector must have 3 elements.</p>
<p>If the types of the 3 elements in the output vector are: [<a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a5d5cd46919fa987731fb2edefe0f2a0c">flex_type_enum::INTEGER</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a63b588d5559f64f89a416e656880b949">flex_type_enum::STRING</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76ae738c26bf4ce1037fa81b039a915cbf6">flex_type_enum::FLOAT</a>] then, they will be parsed as such emitting an output of [1, "hello world", 2.0].</p>
<p>However, if the types of the 3 elements in the output vector are: [<a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a63b588d5559f64f89a416e656880b949">flex_type_enum::STRING</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a63b588d5559f64f89a416e656880b949">flex_type_enum::STRING</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a63b588d5559f64f89a416e656880b949">flex_type_enum::STRING</a>] then, the output will contain be ["1", "hello world", "2.0"].</p>
<p>Type interpretation failures will produce an error. For instance if the types are [<a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a63b588d5559f64f89a416e656880b949">flex_type_enum::STRING</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a5d5cd46919fa987731fb2edefe0f2a0c">flex_type_enum::INTEGER</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a63b588d5559f64f89a416e656880b949">flex_type_enum::STRING</a>], since the second element cannot be correctly interpreted as an integer, the tokenization will fail.</p>
<p>The types current supported are:</p><ul>
<li><a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a5d5cd46919fa987731fb2edefe0f2a0c">flex_type_enum::INTEGER</a></li>
<li><a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76ae738c26bf4ce1037fa81b039a915cbf6">flex_type_enum::FLOAT</a></li>
<li><a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a63b588d5559f64f89a416e656880b949">flex_type_enum::STRING</a></li>
<li><a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a87752381b583740610f1dfeb07fdad7e">flex_type_enum::VECTOR</a> (a vector of numbers specified like [1 2 3] but allowing separators to be spaces, commas(,) or semicolons(;). The separator should not match the CSV separator since the parsers are independent)</li>
</ul>
<p>The tokenizer will not modify the types of the output vector. However, if permit_undefined is specified, the output type can be set to <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a0db45d2a4141101bdfe48e3314cfbca3">flex_type_enum::UNDEFINED</a> for an empty non-string field. For instance:</p>
<p>If my input line is </p><pre class="fragment">*     1, , 2.0
* </pre><p> If I have type specifiers [<a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a5d5cd46919fa987731fb2edefe0f2a0c">flex_type_enum::INTEGER</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a63b588d5559f64f89a416e656880b949">flex_type_enum::STRING</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76ae738c26bf4ce1037fa81b039a915cbf6">flex_type_enum::FLOAT</a>] This will be parsed as [1, "", 2.0] regardless of permit_undefined.</p>
<p>However if I have type specifiers [<a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a5d5cd46919fa987731fb2edefe0f2a0c">flex_type_enum::INTEGER</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a5d5cd46919fa987731fb2edefe0f2a0c">flex_type_enum::INTEGER</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76ae738c26bf4ce1037fa81b039a915cbf6">flex_type_enum::FLOAT</a>] and permit_undefined == false, This will be parsed as [1, 0, 2.0].</p>
<p>And if I have type specifiers [<a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a5d5cd46919fa987731fb2edefe0f2a0c">flex_type_enum::INTEGER</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76a5d5cd46919fa987731fb2edefe0f2a0c">flex_type_enum::INTEGER</a>, <a class="el" href="namespaceturi.html#a232ed812da2796b7bd317ea4b3a21f76ae738c26bf4ce1037fa81b039a915cbf6">flex_type_enum::FLOAT</a>] and permit_undefined == true, This will be parsed as [1, UNDEFINED, 2.0].</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>Pointer to line to tokenize </td></tr>
    <tr><td class="paramname">len</td><td>Length of line to tokenize </td></tr>
    <tr><td class="paramname">output</td><td>The output vector which is of the same length as the number of columns, and has all the types specified. </td></tr>
    <tr><td class="paramname">permit_undefined</td><td>Allows output vector to repr </td></tr>
    <tr><td class="paramname">output_order</td><td>a pointer to an array of the same length as the output. Essentially column 'i' will be written to output_order[i]. if output_order[i] == -1, the column is ignored. If output_order == nullptr, this is equivalent to the having output_order[i] == i</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of output entries filled. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a604e9d5d369f40c7b7b3858cbe2d6cbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char turi::csv_line_tokenizer::comment_char = '#'</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The character used to begin a comment (Default '#'). An occurance of this character outside of quoted strings will cause the parser to ignore the remainder of the line. </p><pre class="fragment">* # this is a
* # comment
* user,name,rating
* 123,hello,45
* 312,chu, 21
* 333,zzz, 3 # this is also a comment
* 444,aaa, 51
* </pre> 
<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00095">95</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae365a84b1ad0a090fba52c1745c11eec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string turi::csv_line_tokenizer::delimiter = &quot;,&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The delimiter character to use to separate fields (Default ",") </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00071">71</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a12c6577567bdc0c46ee0fed2a6d7da3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool turi::csv_line_tokenizer::double_quote = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If set to true, pairs of quote characters in a quoted string are interpreted as a single quote (Default false). For instance, if set to true, the 2nd field of the 2nd line is read as <b>"hello "world""</b> </p><pre class="fragment">* user, message
* 123, "hello ""world"""
* </pre> 
<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00112">112</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab22415e323a44191b6a729e72045272e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char turi::csv_line_tokenizer::escape_char = '\\'</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The character to use to identify the beginning of a C escape sequence (Defualt '\'). i.e. "\n" will be converted to the '<br />
' character, "\\" will be converted to "\", etc. Note that only the single character escapes are converted. unicode (), octal (), hexadecimal () are not interpreted. </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00060">60</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a015772eb0fdb2c26df69aa440964f267"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt;std::string&gt; turi::csv_line_tokenizer::false_values</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>string values which map to numeric 0 </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00134">134</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a521b1a75c29eee5940f22eca6047238c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool turi::csv_line_tokenizer::has_comment_char = true</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Whether comment char is used </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00100">100</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6144ccf11c60f894ee158b1056938a28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string turi::csv_line_tokenizer::line_terminator = &quot;\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The string to use to separate lines. Defaults to "\n". Setting the new line string to "\n" has special effects in that it causes "\r", "\r\n" and "\n" to be all interpreted as new lines. </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00079">79</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="af4ee9fe422e418cb3a5e6edc09514280"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; turi::csv_line_tokenizer::na_values</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The strings which will be parsed as missing values.</p>
<p>(also see empty_string_in_na_values) </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00124">124</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aaf846b5d74d764338a030c57e96a49e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool turi::csv_line_tokenizer::only_raw_string_substitutions = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If this is set (defaults to false), then the true/false/na substitutions are only permitted on raw unparsed strings; that is strings before dequoting, de-escaping, etc. </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00141">141</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1baea9f19cb4cedf1c18f1068cd1675b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool turi::csv_line_tokenizer::preserve_quoting = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If set to true, quotes inside a field will be preserved (Default false). i.e. if set to true, the 2nd entry in the following row will be read as ""hello world"" with the quote characters. </p><pre class="fragment">*   1,"hello world",5
* </pre> 
<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00047">47</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a370510f1fee79093bbb8f3e4c9784aa6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char turi::csv_line_tokenizer::quote_char = '\&quot;'</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The quote character to use (Default '"') </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00117">117</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a839eaf9c68ac8c72e0545c74e90ac197"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool turi::csv_line_tokenizer::skip_initial_space = true</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If set to true, initial spaces before fields are ignored (Default true). </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00065">65</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4419fed8f27bbffd3a95213c76349e16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt;std::string&gt; turi::csv_line_tokenizer::true_values</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>string values which map to numeric 1 </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00129">129</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab300193d420d2fede5180471bd5cee3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool turi::csv_line_tokenizer::use_escape_char = true</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If escape_char is used. </p>

<p>Definition at line <a class="el" href="csv__line__tokenizer_8hpp_source.html#l00052">52</a> of file <a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>core/storage/sframe_data/<a class="el" href="csv__line__tokenizer_8hpp_source.html">csv_line_tokenizer.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceturi.html">turi</a></li><li class="navelem"><a class="el" href="structturi_1_1csv__line__tokenizer.html">csv_line_tokenizer</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
