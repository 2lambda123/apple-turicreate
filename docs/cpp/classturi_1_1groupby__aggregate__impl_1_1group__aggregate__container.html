<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Turi Create: turi::groupby_aggregate_impl::group_aggregate_container Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turi Create
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">turi::groupby_aggregate_impl::group_aggregate_container Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="groupby__aggregate__impl_8hpp_source.html">core/storage/sframe_data/groupby_aggregate_impl.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aff50de7cf9ee23bc8f4d7267976df43c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html#aff50de7cf9ee23bc8f4d7267976df43c">group_aggregate_container</a> (size_t max_buffer_size, size_t num_segments)</td></tr>
<tr class="separator:aff50de7cf9ee23bc8f4d7267976df43c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac991925e7c01b88404ea93c25ccc2478"><td class="memItemLeft" align="right" valign="top"><a id="ac991925e7c01b88404ea93c25ccc2478"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html#ac991925e7c01b88404ea93c25ccc2478">group_aggregate_container</a> (const <a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html">group_aggregate_container</a> &amp;other)=delete</td></tr>
<tr class="memdesc:ac991925e7c01b88404ea93c25ccc2478"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy constructor. <br /></td></tr>
<tr class="separator:ac991925e7c01b88404ea93c25ccc2478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66363245fa93a8e0e028b3800d58908c"><td class="memItemLeft" align="right" valign="top"><a id="a66363245fa93a8e0e028b3800d58908c"></a>
<a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html">group_aggregate_container</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html#a66363245fa93a8e0e028b3800d58908c">operator=</a> (const <a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html">group_aggregate_container</a> &amp;other)=delete</td></tr>
<tr class="memdesc:a66363245fa93a8e0e028b3800d58908c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted assignment operator. <br /></td></tr>
<tr class="separator:a66363245fa93a8e0e028b3800d58908c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc5cb882502d33c20c012f279f7e0627"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html#acc5cb882502d33c20c012f279f7e0627">define_group</a> (std::vector&lt; size_t &gt; column_numbers, std::shared_ptr&lt; <a class="el" href="classturi_1_1group__aggregate__value.html">group_aggregate_value</a> &gt; aggregator)</td></tr>
<tr class="separator:acc5cb882502d33c20c012f279f7e0627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a647e6dfe355b30b9d835a7454836f024"><td class="memItemLeft" align="right" valign="top"><a id="a647e6dfe355b30b9d835a7454836f024"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html#a647e6dfe355b30b9d835a7454836f024">add</a> (const std::vector&lt; <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;val, size_t num_keys)</td></tr>
<tr class="memdesc:a647e6dfe355b30b9d835a7454836f024"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new element to the container. <br /></td></tr>
<tr class="separator:a647e6dfe355b30b9d835a7454836f024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b322e1d1b167615c7dedb878c5abea5"><td class="memItemLeft" align="right" valign="top"><a id="a8b322e1d1b167615c7dedb878c5abea5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html#a8b322e1d1b167615c7dedb878c5abea5">add</a> (const <a class="el" href="structturi_1_1sframe__rows_1_1row.html">sframe_rows::row</a> &amp;val, size_t num_keys)</td></tr>
<tr class="memdesc:a8b322e1d1b167615c7dedb878c5abea5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new element to the container. <br /></td></tr>
<tr class="separator:a8b322e1d1b167615c7dedb878c5abea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c37dcf5b6b14c27deaebd504760a55d"><td class="memItemLeft" align="right" valign="top"><a id="a5c37dcf5b6b14c27deaebd504760a55d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html#a5c37dcf5b6b14c27deaebd504760a55d">group_and_write</a> (<a class="el" href="classturi_1_1sframe.html">sframe</a> &amp;out)</td></tr>
<tr class="memdesc:a5c37dcf5b6b14c27deaebd504760a55d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sort all elements in the container and writes to the output. <br /></td></tr>
<tr class="separator:a5c37dcf5b6b14c27deaebd504760a55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68d8167cc6f2721fe0745587e62665e9"><td class="memItemLeft" align="right" valign="top"><a id="a68d8167cc6f2721fe0745587e62665e9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html#a68d8167cc6f2721fe0745587e62665e9">init_tls</a> ()</td></tr>
<tr class="memdesc:a68d8167cc6f2721fe0745587e62665e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">init tls data members <br /></td></tr>
<tr class="separator:a68d8167cc6f2721fe0745587e62665e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This maintains the complete aggregation result for an SFrame.</p>
<p>This class essentially implements the entire groupby aggregation algorithm. Aggregation groups are defined using <a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html#acc5cb882502d33c20c012f279f7e0627">define_group</a>. After which, rows are inserted using the add method.</p>
<p>num_segments is the maximum degree of parallelism permissible. This is the number of segments of the output SFrame.</p>
<p>Keys are first hashed into a segment, and each segment is then executed independently. For each segment, rows are aggregated in memory as much as possible until we exceed the max_buffer_size number of keys stored in memory. If more keys are needed the existing keys are all sorted and flushed out to disk. This process repeats until all data is read.</p>
<p>Then when <a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html#a5c37dcf5b6b14c27deaebd504760a55d">group_and_write</a> is called, a k-way merge is performed across all the sorted ranges of keys on disk to write the final output. </p>

<p class="definition">Definition at line <a class="el" href="groupby__aggregate__impl_8hpp_source.html#l00196">196</a> of file <a class="el" href="groupby__aggregate__impl_8hpp_source.html">groupby_aggregate_impl.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aff50de7cf9ee23bc8f4d7267976df43c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff50de7cf9ee23bc8f4d7267976df43c">&#9670;&nbsp;</a></span>group_aggregate_container()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">turi::groupby_aggregate_impl::group_aggregate_container::group_aggregate_container </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_segments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_buffer_size</td><td>Maximum number of aggregators to store in memory per segment </td></tr>
    <tr><td class="paramname">num_segments</td><td>Maximum degree of parallelism </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acc5cb882502d33c20c012f279f7e0627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc5cb882502d33c20c012f279f7e0627">&#9670;&nbsp;</a></span>define_group()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void turi::groupby_aggregate_impl::group_aggregate_container::define_group </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; size_t &gt;&#160;</td>
          <td class="paramname"><em>column_numbers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classturi_1_1group__aggregate__value.html">group_aggregate_value</a> &gt;&#160;</td>
          <td class="paramname"><em>aggregator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a new group operation which groups the values of a column </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>core/storage/sframe_data/<a class="el" href="groupby__aggregate__impl_8hpp_source.html">groupby_aggregate_impl.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceturi.html">turi</a></li><li class="navelem"><a class="el" href="namespaceturi_1_1groupby__aggregate__impl.html">groupby_aggregate_impl</a></li><li class="navelem"><a class="el" href="classturi_1_1groupby__aggregate__impl_1_1group__aggregate__container.html">group_aggregate_container</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
