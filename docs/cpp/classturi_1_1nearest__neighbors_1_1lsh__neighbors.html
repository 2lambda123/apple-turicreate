<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Turi Create: turi::nearest_neighbors::lsh_neighbors Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turi Create
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classturi_1_1nearest__neighbors_1_1lsh__neighbors.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classturi_1_1nearest__neighbors_1_1lsh__neighbors-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">turi::nearest_neighbors::lsh_neighbors Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="lsh__neighbors_8hpp_source.html">toolkits/nearest_neighbors/lsh_neighbors.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1744ace3fc84857ea50b0911f6993722"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1nearest__neighbors_1_1lsh__neighbors.html#a1744ace3fc84857ea50b0911f6993722">~lsh_neighbors</a> ()</td></tr>
<tr class="separator:a1744ace3fc84857ea50b0911f6993722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a60c7e9f4307fc3e5c730731fe8f668"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1nearest__neighbors_1_1lsh__neighbors.html#a9a60c7e9f4307fc3e5c730731fe8f668">init_options</a> (const std::map&lt; std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;_opts) override</td></tr>
<tr class="separator:a9a60c7e9f4307fc3e5c730731fe8f668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4bf1a954be325683200e4720651315d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1nearest__neighbors_1_1lsh__neighbors.html#ab4bf1a954be325683200e4720651315d">train</a> (const <a class="el" href="classturi_1_1sframe.html">sframe</a> &amp;X, const std::vector&lt; <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;ref_labels, const std::vector&lt; dist_component_type &gt; &amp;composite_distance_params, const std::map&lt; std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;opts) override</td></tr>
<tr class="separator:ab4bf1a954be325683200e4720651315d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2361f67a1ba53b0e97363afbe5b48b89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classturi_1_1sframe.html">sframe</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1nearest__neighbors_1_1lsh__neighbors.html#a2361f67a1ba53b0e97363afbe5b48b89">query</a> (const v2::ml_data &amp;mld_queries, const std::vector&lt; <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;query_labels, const size_t k, const double radius, const bool include_self_edges) const override</td></tr>
<tr class="separator:a2361f67a1ba53b0e97363afbe5b48b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a811bb13d46192aa14b87487135003978"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1nearest__neighbors_1_1lsh__neighbors.html#a811bb13d46192aa14b87487135003978">get_version</a> () const override</td></tr>
<tr class="separator:a811bb13d46192aa14b87487135003978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7671d3d3c5c1a79f9eb3025ec43492db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1nearest__neighbors_1_1lsh__neighbors.html#a7671d3d3c5c1a79f9eb3025ec43492db">save_impl</a> (<a class="el" href="classturi_1_1oarchive.html">turi::oarchive</a> &amp;oarc) const override</td></tr>
<tr class="separator:a7671d3d3c5c1a79f9eb3025ec43492db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a5f4e776ed3db1c4fcb14e83d5d200e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1nearest__neighbors_1_1lsh__neighbors.html#a6a5f4e776ed3db1c4fcb14e83d5d200e">load_version</a> (<a class="el" href="classturi_1_1iarchive.html">turi::iarchive</a> &amp;iarc, size_t version) override</td></tr>
<tr class="separator:a6a5f4e776ed3db1c4fcb14e83d5d200e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>LSH nearest neighbor class.</p>
<p>The intuition behind LSH-based indexes is to hash data points into buckets, such that similar points are more likely to be hashed to the same bucket than dissimilar ones. We could then find the approximate nearest neighbors of any point, simply by finding the bucket that it is hashed to.</p>
<p>It works as follows:</p>
<ol type="1">
<li>Choose k hash functions h_1, h_2, ..., h_k from a uniform of some family of LSH functions. For any data point v, place v in the bucket with key g(v) = (h_1(v), h_2(v), ..., h_k(v)).</li>
<li>Independently perform step 1 l times to construct l separate hash tables, with hash functions g_1, g_2, ..., g_l</li>
</ol>
<p>You can set k and l by setting num_projections_per_table and num_tables respectively. </p>

<p class="definition">Definition at line <a class="el" href="lsh__neighbors_8hpp_source.html#l00038">38</a> of file <a class="el" href="lsh__neighbors_8hpp_source.html">lsh_neighbors.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1744ace3fc84857ea50b0911f6993722"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1744ace3fc84857ea50b0911f6993722">&#9670;&nbsp;</a></span>~lsh_neighbors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">turi::nearest_neighbors::lsh_neighbors::~lsh_neighbors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor. Make sure bad things don't happen </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a811bb13d46192aa14b87487135003978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a811bb13d46192aa14b87487135003978">&#9670;&nbsp;</a></span>get_version()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t turi::nearest_neighbors::lsh_neighbors::get_version </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the model version number </p>

<p class="definition">Definition at line <a class="el" href="lsh__neighbors_8hpp_source.html#l00098">98</a> of file <a class="el" href="lsh__neighbors_8hpp_source.html">lsh_neighbors.hpp</a>.</p>

</div>
</div>
<a id="a9a60c7e9f4307fc3e5c730731fe8f668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a60c7e9f4307fc3e5c730731fe8f668">&#9670;&nbsp;</a></span>init_options()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void turi::nearest_neighbors::lsh_neighbors::init_options </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>_opts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set the model options. Use the option manager to set these options. The option manager should throw errors if the options do not satisfy the option manager's conditions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">opts</td><td>Options to set </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6a5f4e776ed3db1c4fcb14e83d5d200e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a5f4e776ed3db1c4fcb14e83d5d200e">&#9670;&nbsp;</a></span>load_version()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void turi::nearest_neighbors::lsh_neighbors::load_version </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classturi_1_1iarchive.html">turi::iarchive</a> &amp;&#160;</td>
          <td class="paramname"><em>iarc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Turi serialization save </p>

</div>
</div>
<a id="a2361f67a1ba53b0e97363afbe5b48b89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2361f67a1ba53b0e97363afbe5b48b89">&#9670;&nbsp;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classturi_1_1sframe.html">sframe</a> turi::nearest_neighbors::lsh_neighbors::query </td>
          <td>(</td>
          <td class="paramtype">const v2::ml_data &amp;&#160;</td>
          <td class="paramname"><em>mld_queries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>query_labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>include_self_edges</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Find neighbors of queries in a created LSH model.</p>
<p>For each query, the method keeps track of the current k-nearest neighbors in the LSH. At each node, the closest possible point in each child node to the query is computed, and if this distance is further than the current k'th nearest neighbor, that child node (and its descendants) is skpped in the traversal.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mld_queries</td><td>query data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">query_labels</td><td>sframe query labels </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">k</td><td>size_t max number of neighbors to return for each query </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">radius</td><td>double max distance for returned neighbors to each query</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ret</td><td>sframe SFrame with four columns: query label, reference label, distance, and rank.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Assumes that data is already in the right shape. </dd></dl>

</div>
</div>
<a id="a7671d3d3c5c1a79f9eb3025ec43492db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7671d3d3c5c1a79f9eb3025ec43492db">&#9670;&nbsp;</a></span>save_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void turi::nearest_neighbors::lsh_neighbors::save_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classturi_1_1oarchive.html">turi::oarchive</a> &amp;&#160;</td>
          <td class="paramname"><em>oarc</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Turi serialization save </p>

</div>
</div>
<a id="ab4bf1a954be325683200e4720651315d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4bf1a954be325683200e4720651315d">&#9670;&nbsp;</a></span>train()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void turi::nearest_neighbors::lsh_neighbors::train </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classturi_1_1sframe.html">sframe</a> &amp;&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ref_labels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; dist_component_type &gt; &amp;&#160;</td>
          <td class="paramname"><em>composite_distance_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a LSH nearest neighbors model.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">X</td><td>sframe input feature data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ref_labels</td><td>row labels for the reference dataset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">composite_distance_params</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">y</td><td>sframe input labels </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>toolkits/nearest_neighbors/<a class="el" href="lsh__neighbors_8hpp_source.html">lsh_neighbors.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceturi.html">turi</a></li><li class="navelem"><b>nearest_neighbors</b></li><li class="navelem"><a class="el" href="classturi_1_1nearest__neighbors_1_1lsh__neighbors.html">lsh_neighbors</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
