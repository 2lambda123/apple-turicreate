<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Turi Create: turi::file_line_count_estimator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turi Create
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classturi_1_1file__line__count__estimator.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classturi_1_1file__line__count__estimator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">turi::file_line_count_estimator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="file__line__count__estimator_8hpp_source.html">core/util/file_line_count_estimator.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa96168c2e781c7f08af2ae54a79476b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1file__line__count__estimator.html#aa96168c2e781c7f08af2ae54a79476b2">file_line_count_estimator</a> ()</td></tr>
<tr class="separator:aa96168c2e781c7f08af2ae54a79476b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43c55686be545b2a7042f6c9e0c65dfd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1file__line__count__estimator.html#a43c55686be545b2a7042f6c9e0c65dfd">file_line_count_estimator</a> (size_t file_size_in_bytes)</td></tr>
<tr class="separator:a43c55686be545b2a7042f6c9e0c65dfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b1d1d716d964ceada5e2a8d9a568e3f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1file__line__count__estimator.html#a2b1d1d716d964ceada5e2a8d9a568e3f">set_file_size</a> (size_t file_size_in_bytes)</td></tr>
<tr class="separator:a2b1d1d716d964ceada5e2a8d9a568e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4a0da65299dae65e1583a45d25d72aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1file__line__count__estimator.html#ab4a0da65299dae65e1583a45d25d72aa">observe</a> (<a class="el" href="classturi_1_1file__line__count__estimator.html">file_line_count_estimator</a> &amp;other_estimator)</td></tr>
<tr class="separator:ab4a0da65299dae65e1583a45d25d72aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57afcec088e2aee593a6aefc75d3c832"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1file__line__count__estimator.html#a57afcec088e2aee593a6aefc75d3c832">observe</a> (size_t line_count, size_t file_pos)</td></tr>
<tr class="separator:a57afcec088e2aee593a6aefc75d3c832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8128a322e1ed06dcc04e29a65adf833"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1file__line__count__estimator.html#ae8128a322e1ed06dcc04e29a65adf833">number_of_lines</a> () const</td></tr>
<tr class="separator:ae8128a322e1ed06dcc04e29a65adf833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a825516790489fa0e92353de60c0c0d37"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1file__line__count__estimator.html#a825516790489fa0e92353de60c0c0d37">num_lines_observed</a> () const</td></tr>
<tr class="separator:a825516790489fa0e92353de60c0c0d37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Estimate the number of lines in a file and the number of bytes used to represent each line.</p>
<p>We estimate the number of lines in a file by making continuous observations of the current file position, and the number of lines read so far, and making simple assumptions about buffering behavior.</p>
<div class="fragment"><div class="line">ifstream fin;</div><div class="line"><a class="code" href="classturi_1_1file__line__count__estimator.html#aa96168c2e781c7f08af2ae54a79476b2">file_line_count_estimator</a> estimator;</div><div class="line"><span class="keywordflow">while</span>(...) {</div><div class="line">   read_lines.</div><div class="line">   estimator.observe(lines_read since we last called <a class="code" href="classturi_1_1file__line__count__estimator.html#ab4a0da65299dae65e1583a45d25d72aa">observe</a>,</div><div class="line">                     fin.tellg());</div><div class="line">   estimator.lines_in_file() contains estimate of the number</div><div class="line">                             of lines in the file</div><div class="line">}</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="file__line__count__estimator_8hpp_source.html#l00032">32</a> of file <a class="el" href="file__line__count__estimator_8hpp_source.html">file_line_count_estimator.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa96168c2e781c7f08af2ae54a79476b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa96168c2e781c7f08af2ae54a79476b2">&#9670;&nbsp;</a></span>file_line_count_estimator() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">turi::file_line_count_estimator::file_line_count_estimator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The default constructor. If used, set_file_size must be used to set the filesize in bytes. </p>

<p class="definition">Definition at line <a class="el" href="file__line__count__estimator_8hpp_source.html#l00038">38</a> of file <a class="el" href="file__line__count__estimator_8hpp_source.html">file_line_count_estimator.hpp</a>.</p>

</div>
</div>
<a id="a43c55686be545b2a7042f6c9e0c65dfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43c55686be545b2a7042f6c9e0c65dfd">&#9670;&nbsp;</a></span>file_line_count_estimator() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">turi::file_line_count_estimator::file_line_count_estimator </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>file_size_in_bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Constructs a file line count estimator. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_size_in_bytes</td><td>The file size in bytes. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="file__line__count__estimator_8hpp_source.html#l00044">44</a> of file <a class="el" href="file__line__count__estimator_8hpp_source.html">file_line_count_estimator.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a825516790489fa0e92353de60c0c0d37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a825516790489fa0e92353de60c0c0d37">&#9670;&nbsp;</a></span>num_lines_observed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t turi::file_line_count_estimator::num_lines_observed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Total number of lines observed so far </p>

<p class="definition">Definition at line <a class="el" href="file__line__count__estimator_8hpp_source.html#l00114">114</a> of file <a class="el" href="file__line__count__estimator_8hpp_source.html">file_line_count_estimator.hpp</a>.</p>

</div>
</div>
<a id="ae8128a322e1ed06dcc04e29a65adf833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8128a322e1ed06dcc04e29a65adf833">&#9670;&nbsp;</a></span>number_of_lines()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double turi::file_line_count_estimator::number_of_lines </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current estimate of the number of lines left in the file. This returns 0 if the estimate is not available. One call to observe is sufficient to get a rough estimate. </p>

<p class="definition">Definition at line <a class="el" href="file__line__count__estimator_8hpp_source.html#l00102">102</a> of file <a class="el" href="file__line__count__estimator_8hpp_source.html">file_line_count_estimator.hpp</a>.</p>

</div>
</div>
<a id="ab4a0da65299dae65e1583a45d25d72aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4a0da65299dae65e1583a45d25d72aa">&#9670;&nbsp;</a></span>observe() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void turi::file_line_count_estimator::observe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classturi_1_1file__line__count__estimator.html">file_line_count_estimator</a> &amp;&#160;</td>
          <td class="paramname"><em>other_estimator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Integrates statistics from another estimator </p>

<p class="definition">Definition at line <a class="el" href="file__line__count__estimator_8hpp_source.html#l00058">58</a> of file <a class="el" href="file__line__count__estimator_8hpp_source.html">file_line_count_estimator.hpp</a>.</p>

</div>
</div>
<a id="a57afcec088e2aee593a6aefc75d3c832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57afcec088e2aee593a6aefc75d3c832">&#9670;&nbsp;</a></span>observe() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void turi::file_line_count_estimator::observe </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>line_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>file_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This should be called for every block of read operations performed on the file. Missing observations will cause the estimate to drift. The more frequently this is called (preferably once for every line), the more accurate the estimate. </p>

<p class="definition">Definition at line <a class="el" href="file__line__count__estimator_8hpp_source.html#l00070">70</a> of file <a class="el" href="file__line__count__estimator_8hpp_source.html">file_line_count_estimator.hpp</a>.</p>

</div>
</div>
<a id="a2b1d1d716d964ceada5e2a8d9a568e3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b1d1d716d964ceada5e2a8d9a568e3f">&#9670;&nbsp;</a></span>set_file_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void turi::file_line_count_estimator::set_file_size </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>file_size_in_bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets the file size in bytes. </p>

<p class="definition">Definition at line <a class="el" href="file__line__count__estimator_8hpp_source.html#l00050">50</a> of file <a class="el" href="file__line__count__estimator_8hpp_source.html">file_line_count_estimator.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>core/util/<a class="el" href="file__line__count__estimator_8hpp_source.html">file_line_count_estimator.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceturi.html">turi</a></li><li class="navelem"><a class="el" href="classturi_1_1file__line__count__estimator.html">file_line_count_estimator</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
