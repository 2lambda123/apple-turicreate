<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Turi Create: turi::sparse_similarity_lookup Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turi Create
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classturi_1_1sparse__similarity__lookup.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classturi_1_1sparse__similarity__lookup-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">turi::sparse_similarity_lookup Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="sparse__similarity__lookup_8hpp_source.html">toolkits/sparse_similarity/sparse_similarity_lookup.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a490dfa9b360724775f54d6c7c3bf9ee5"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#a490dfa9b360724775f54d6c7c3bf9ee5">similarity_name</a> () const =0</td></tr>
<tr class="separator:a490dfa9b360724775f54d6c7c3bf9ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7fa7041812874ca51ccf76c5834d40"><td class="memItemLeft" align="right" valign="top">virtual std::map&lt; std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#a5a7fa7041812874ca51ccf76c5834d40">train_from_sparse_matrix_sarray</a> (size_t num_items, const std::shared_ptr&lt; <a class="el" href="classturi_1_1sarray.html">sarray</a>&lt; std::vector&lt; std::pair&lt; size_t, double &gt; &gt; &gt; &gt; &amp;data)=0</td></tr>
<tr class="separator:a5a7fa7041812874ca51ccf76c5834d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e19fac03fe87b1165d584d33f316974"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#a6e19fac03fe87b1165d584d33f316974">setup_by_raw_similarity</a> (size_t num_items, const <a class="el" href="group__group__flexible__type__types.html#ga6850eab6f89c527876575257a7c271ce">flex_list</a> &amp;item_data, const <a class="el" href="classturi_1_1sframe.html">sframe</a> &amp;_interaction_data, const std::string &amp;item_column, const std::string &amp;similar_item_column, const std::string &amp;similarity, bool add_reverse=false)=0</td></tr>
<tr class="separator:a6e19fac03fe87b1165d584d33f316974"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a171f8105a8743af9f846a589634ad3fa"><td class="memItemLeft" align="right" valign="top">virtual size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#a171f8105a8743af9f846a589634ad3fa">score_items</a> (std::vector&lt; std::pair&lt; size_t, double &gt; &gt; &amp;item_predictions, const std::vector&lt; std::pair&lt; size_t, double &gt; &gt; &amp;user_item_data) const =0</td></tr>
<tr class="separator:a171f8105a8743af9f846a589634ad3fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11b273cac070dd308c0c27de837e9a0b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#a11b273cac070dd308c0c27de837e9a0b">get_similar_items</a> (std::vector&lt; std::pair&lt; size_t, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &gt; &amp;similar_items_dest, size_t item, size_t top_k) const =0</td></tr>
<tr class="separator:a11b273cac070dd308c0c27de837e9a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba56b931eebbb0b42eb6063f5f7e7939"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#aba56b931eebbb0b42eb6063f5f7e7939">save</a> (<a class="el" href="classturi_1_1oarchive.html">turi::oarchive</a> &amp;oarc) const =0</td></tr>
<tr class="separator:aba56b931eebbb0b42eb6063f5f7e7939"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c85086feabceca616bf0fd516ee0456"><td class="memItemLeft" align="right" valign="top">const std::map&lt; std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#a4c85086feabceca616bf0fd516ee0456">current_options</a> () const</td></tr>
<tr class="separator:a4c85086feabceca616bf0fd516ee0456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d0cab54e15ed09773504fc275183fe1"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#a3d0cab54e15ed09773504fc275183fe1">_debug_check_equal</a> (const <a class="el" href="classturi_1_1sparse__similarity__lookup.html">sparse_similarity_lookup</a> &amp;other) const =0</td></tr>
<tr class="separator:a3d0cab54e15ed09773504fc275183fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad54f05474773212cd508661c5cbbaed1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#ad54f05474773212cd508661c5cbbaed1">add_options</a> (<a class="el" href="classturi_1_1option__manager.html">option_manager</a> &amp;<a class="el" href="classturi_1_1sparse__similarity__lookup.html#a7bf073797af3c79a47f7ca8c773d56ad">options</a>)</td></tr>
<tr class="separator:ad54f05474773212cd508661c5cbbaed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0641507988cd5b05cd285714556b81a1"><td class="memItemLeft" align="right" valign="top">static std::shared_ptr&lt; <a class="el" href="classturi_1_1sparse__similarity__lookup.html">sparse_similarity_lookup</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#a0641507988cd5b05cd285714556b81a1">create</a> (const std::string &amp;similarity, const std::map&lt; std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;<a class="el" href="classturi_1_1sparse__similarity__lookup.html#a7bf073797af3c79a47f7ca8c773d56ad">options</a>)</td></tr>
<tr class="separator:a0641507988cd5b05cd285714556b81a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a7bf073797af3c79a47f7ca8c773d56ad"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classturi_1_1sparse__similarity__lookup.html#a7bf073797af3c79a47f7ca8c773d56ad">options</a></td></tr>
<tr class="separator:a7bf073797af3c79a47f7ca8c773d56ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A model that can be used for sparse similarity lookup.</p>
<p>A trained version of this model contains a lookup table of the nearest items to each item along with a similarity score. This allows both retrieval of the most similar items to a given item, and to generate a list of the items most similar to a collection of items. The latter is used to recommend items, e.g. by providing a list of the items and ratings for a particular user.</p>
<p>The similarity metrics are an implementation of a class that implements a number of methods dictating the math used in the accumulation. See <a class="el" href="similarities_8hpp_source.html">similarities.hpp</a> for details.</p>
<p>This model is creating using the create(...) methods below, which takes the name of the similarity and the current options. The options given in add_options(...) must be present in the options map.</p>
<p>The model can be trained by either providing the similarities of the items directly, or by training the model on a sarray of user-item-ratings. See the below functions for details.</p>
<p>Code Structure:</p>
<ul>
<li>This model is intended to be encapsulated by other user-facing models such as item similarity. In this case, item similarity provides the user facing API, creates this model and then uses it. Some item cf specific features, like how to handle new users, are punted to that model &ndash; this one only can be queried with a list of items and ratings which then produce the output.</li>
<li>The similarity class defines the metric used, and then how the averaging at prediction time is done.</li>
<li>The similarity class is given as a template to the implementation part of this class, sparse_similarity_lookup_impl, which inherits from this one. This class does the training (if it's not farmed out to different helper functions), and takes care of the prediction and item scoring. Basically, the core of the algorithm is in <a class="el" href="sparse__similarity__lookup__impl_8hpp_source.html">sparse_similarity_lookup_impl.hpp</a>.</li>
<li>A number of accompaning utilities &ndash; for example, nearest neighbors functions, utilities to generate the per-item statistics, and</li>
<li>A dense matrix class that stores only the upper diaganol part of a matrix is provided in <a class="el" href="sliced__itemitem__matrix_8hpp_source.html">sliced_itemitem_matrix.hpp</a>. Included in that header are tools for estimating the number of row-slices and passes through the data to make given constraints on the memory usage. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="sparse__similarity__lookup_8hpp_source.html#l00070">70</a> of file <a class="el" href="sparse__similarity__lookup_8hpp_source.html">sparse_similarity_lookup.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a3d0cab54e15ed09773504fc275183fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d0cab54e15ed09773504fc275183fe1">&#9670;&nbsp;</a></span>_debug_check_equal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool turi::sparse_similarity_lookup::_debug_check_equal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classturi_1_1sparse__similarity__lookup.html">sparse_similarity_lookup</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A method to detect if two <a class="el" href="classturi_1_1sparse__similarity__lookup.html">sparse_similarity_lookup</a> classes are essentially the same. </p>

</div>
</div>
<a id="ad54f05474773212cd508661c5cbbaed1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad54f05474773212cd508661c5cbbaed1">&#9670;&nbsp;</a></span>add_options()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void turi::sparse_similarity_lookup::add_options </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classturi_1_1option__manager.html">option_manager</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Adds in all of the options needed for this class to the option manager. </p>

</div>
</div>
<a id="a0641507988cd5b05cd285714556b81a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0641507988cd5b05cd285714556b81a1">&#9670;&nbsp;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::shared_ptr&lt;<a class="el" href="classturi_1_1sparse__similarity__lookup.html">sparse_similarity_lookup</a>&gt; turi::sparse_similarity_lookup::create </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>similarity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Factory method: Call this to create or load a model from one of the existing similarities by name. </p>

</div>
</div>
<a id="a4c85086feabceca616bf0fd516ee0456"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c85086feabceca616bf0fd516ee0456">&#9670;&nbsp;</a></span>current_options()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::map&lt;std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a>&gt;&amp; turi::sparse_similarity_lookup::current_options </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current options. </p>

<p class="definition">Definition at line <a class="el" href="sparse__similarity__lookup_8hpp_source.html#l00166">166</a> of file <a class="el" href="sparse__similarity__lookup_8hpp_source.html">sparse_similarity_lookup.hpp</a>.</p>

</div>
</div>
<a id="a11b273cac070dd308c0c27de837e9a0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11b273cac070dd308c0c27de837e9a0b">&#9670;&nbsp;</a></span>get_similar_items()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void turi::sparse_similarity_lookup::get_similar_items </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::pair&lt; size_t, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>similar_items_dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>top_k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Fills an array with the most similar items to a given item. This is read directly from the lookup table. If fewer than top_k items are present in the lookup table, then only those in the lookup table are returned. </p>

</div>
</div>
<a id="aba56b931eebbb0b42eb6063f5f7e7939"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba56b931eebbb0b42eb6063f5f7e7939">&#9670;&nbsp;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void turi::sparse_similarity_lookup::save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classturi_1_1oarchive.html">turi::oarchive</a> &amp;&#160;</td>
          <td class="paramname"><em>oarc</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Serialization in sparse_similarity_lookup_impl. </p>

</div>
</div>
<a id="a171f8105a8743af9f846a589634ad3fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a171f8105a8743af9f846a589634ad3fa">&#9670;&nbsp;</a></span>score_items()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual size_t turi::sparse_similarity_lookup::score_items </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::pair&lt; size_t, double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>item_predictions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::pair&lt; size_t, double &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>user_item_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Score all items in a list of item predictions given a list of user-item interactions. This method fills in the second part of the tuple for all the items in the item_predictions container.</p>
<p>This is also the way to generate values for predict &ndash;</p>
<p>Returns the number of item similarity pairs that were considered. (In some corner cases, such as when an item had no users that also rated other items, we want to recommend by popularity or some other metric). </p>

</div>
</div>
<a id="a6e19fac03fe87b1165d584d33f316974"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e19fac03fe87b1165d584d33f316974">&#9670;&nbsp;</a></span>setup_by_raw_similarity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void turi::sparse_similarity_lookup::setup_by_raw_similarity </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__group__flexible__type__types.html#ga6850eab6f89c527876575257a7c271ce">flex_list</a> &amp;&#160;</td>
          <td class="paramname"><em>item_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classturi_1_1sframe.html">sframe</a> &amp;&#160;</td>
          <td class="paramname"><em>_interaction_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>item_column</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>similar_item_column</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>similarity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>add_reverse</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets the lookup tables directly from an sframe of interaction data. The interaction data is an sframe containing columns item_column, similar_item_column, and similarity. The items and similar items must be indices in {0, ..., num_items-1}.</p>
<p>An error is raised if the similarity value does not conform to the similarity chosen &ndash; e.g. jaccard similarity must be between 0 and 1.</p>
<p>If add_reverse is true, then all (i,j, rating) entries are also interpreted as (j, i, rating). Note that no duplicates can be present. </p>

</div>
</div>
<a id="a490dfa9b360724775f54d6c7c3bf9ee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a490dfa9b360724775f54d6c7c3bf9ee5">&#9670;&nbsp;</a></span>similarity_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string turi::sparse_similarity_lookup::similarity_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the name of the similarity this version uses. </p>

<p>Implemented in <a class="el" href="classturi_1_1sparse__sim_1_1sparse__similarity__lookup__impl.html#a56ead128d1659e97ef36542cb9a78541">turi::sparse_sim::sparse_similarity_lookup_impl&lt; SimilarityType &gt;</a>.</p>

</div>
</div>
<a id="a5a7fa7041812874ca51ccf76c5834d40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a7fa7041812874ca51ccf76c5834d40">&#9670;&nbsp;</a></span>train_from_sparse_matrix_sarray()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::map&lt;std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a>&gt; turi::sparse_similarity_lookup::train_from_sparse_matrix_sarray </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_items</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="classturi_1_1sarray.html">sarray</a>&lt; std::vector&lt; std::pair&lt; size_t, double &gt; &gt; &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Trains the model from an sarray of vectors of (index, score) pairs. Each row is assumed to be the user, and each index in the score is an item that the user rated. The similarity of a given item to another item is given by treating the user ratings of each item as a sparse vector and then measuring the similarity between them. This calculation is done as efficiently as possible using a combination of nearest neighbors search and lookup tables. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7bf073797af3c79a47f7ca8c773d56ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bf073797af3c79a47f7ca8c773d56ad">&#9670;&nbsp;</a></span>options</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, <a class="el" href="classturi_1_1flexible__type.html">flexible_type</a>&gt; turi::sparse_similarity_lookup::options</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The stored options. </p>

<p class="definition">Definition at line <a class="el" href="sparse__similarity__lookup_8hpp_source.html#l00180">180</a> of file <a class="el" href="sparse__similarity__lookup_8hpp_source.html">sparse_similarity_lookup.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>toolkits/sparse_similarity/<a class="el" href="sparse__similarity__lookup_8hpp_source.html">sparse_similarity_lookup.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceturi.html">turi</a></li><li class="navelem"><a class="el" href="classturi_1_1sparse__similarity__lookup.html">sparse_similarity_lookup</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
