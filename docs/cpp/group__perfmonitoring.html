<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Turi Create: Intrusive Performance Monitoring</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turi Create
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__perfmonitoring.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">Intrusive Performance Monitoring</div>  </div>
</div><!--header-->
<div class="contents">

<p>A tracepoint utility that provides intrusive (requires code change) performance monitoring.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structturi_1_1trace__count.html">turi::trace_count</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga268cd0a7e1c0c9d8e125a091c14a174d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__perfmonitoring.html#ga268cd0a7e1c0c9d8e125a091c14a174d">DECLARE_TRACER</a>(name)&#160;&#160;&#160;<a class="el" href="structturi_1_1trace__count.html">turi::trace_count</a> name;</td></tr>
<tr class="separator:ga268cd0a7e1c0c9d8e125a091c14a174d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71dfca71859c724907b98210fe095ca8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__perfmonitoring.html#ga71dfca71859c724907b98210fe095ca8">INITIALIZE_TRACER</a>(name,  description)&#160;&#160;&#160;name.initialize(#name, description);</td></tr>
<tr class="separator:ga71dfca71859c724907b98210fe095ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8ff52298ec1e31d044b4ae8cd53702f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__perfmonitoring.html#gae8ff52298ec1e31d044b4ae8cd53702f">INITIALIZE_TRACER_NO_PRINT</a>(name,  description)&#160;&#160;&#160;name.initialize(#name, description, false);</td></tr>
<tr class="separator:gae8ff52298ec1e31d044b4ae8cd53702f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27fd71c232b7f2463c22fd912e3a4b20"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__perfmonitoring.html#ga27fd71c232b7f2463c22fd912e3a4b20">BEGIN_TRACEPOINT</a>(name)&#160;&#160;&#160;unsigned long long __ ## name ## _trace_ = rdtsc();</td></tr>
<tr class="separator:ga27fd71c232b7f2463c22fd912e3a4b20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae76212ebdb02ff153f156762c5b1b7fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__perfmonitoring.html#gae76212ebdb02ff153f156762c5b1b7fe">END_TRACEPOINT</a>(name)&#160;&#160;&#160;name.incorporate(rdtsc() - __ ## name ## _trace_);</td></tr>
<tr class="separator:gae76212ebdb02ff153f156762c5b1b7fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3031556c2f15625762cea2eba8da5cfe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__perfmonitoring.html#ga3031556c2f15625762cea2eba8da5cfe">END_AND_BEGIN_TRACEPOINT</a>(endname,  beginname)</td></tr>
<tr class="separator:ga3031556c2f15625762cea2eba8da5cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A tracepoint utility that provides intrusive (requires code change) performance monitoring. </p>
<p>The tracepoint utility provides a extremely low overhead way of profiling a section of code, counting the number of times the section is entered, the average, maximum and mimimum runtimes of the section.</p>
<p>The tracepoint utility can be enabled file by file, or in an entire project by setting the USE_TRACEPOINT macro before including <a class="el" href="tracepoint_8hpp_source.html">tracepoint.hpp</a>, or predefining USE_TRACEPOINT globally. </p><div class="fragment"><div class="line"><span class="preprocessor">#define USE_TRACEPOINT</span></div><div class="line"><span class="preprocessor">#include &quot;perf/tracepoint.hpp&quot;</span></div></div><!-- fragment --><p>Example Usage: </p><div class="fragment"><div class="line"><a class="code" href="group__perfmonitoring.html#ga268cd0a7e1c0c9d8e125a091c14a174d">DECLARE_TRACER</a>(event)</div><div class="line"><a class="code" href="group__perfmonitoring.html#ga71dfca71859c724907b98210fe095ca8">INITIALIZE_TRACER</a>(event, <span class="stringliteral">&quot;event counter name&quot;</span>);</div><div class="line">Then later on...</div><div class="line">BEGIN_TRACEPOINT(event)</div><div class="line">... Do stuff ...</div><div class="line">END_TRACEPOINT(event)</div></div><!-- fragment --><p> See <a class="el" href="group__perfmonitoring.html#ga268cd0a7e1c0c9d8e125a091c14a174d">DECLARE_TRACER</a> for details. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga27fd71c232b7f2463c22fd912e3a4b20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga27fd71c232b7f2463c22fd912e3a4b20">&#9670;&nbsp;</a></span>BEGIN_TRACEPOINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BEGIN_TRACEPOINT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td>&#160;&#160;&#160;unsigned long long __ ## name ## _trace_ = rdtsc();</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Begins a tracepoint. The object with name "name" created by DECLARE_TRACER must be in scope. Times a block of code. Every END_TRACEPOINT must be matched with a BEGIN_TRACEPOINT within the same scope. Tracepoints are safe to use in concurrent use. </p>

<p class="definition">Definition at line <a class="el" href="tracepoint_8hpp_source.html#l00230">230</a> of file <a class="el" href="tracepoint_8hpp_source.html">tracepoint.hpp</a>.</p>

</div>
</div>
<a id="ga268cd0a7e1c0c9d8e125a091c14a174d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga268cd0a7e1c0c9d8e125a091c14a174d">&#9670;&nbsp;</a></span>DECLARE_TRACER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DECLARE_TRACER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="structturi_1_1trace__count.html">turi::trace_count</a> name;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a tracing object with a given name. This creates a variable called "name" which is of type trace_count. and is equivalent to:</p>
<p><a class="el" href="structturi_1_1trace__count.html">turi::trace_count</a> name;</p>
<p>The primary reason to use this macro instead of just writing the code above directly, is that the macro is ignored and compiles to nothing when tracepoints are disabled.</p>
<p>Example Usage: </p><div class="fragment"><div class="line"><a class="code" href="group__perfmonitoring.html#ga268cd0a7e1c0c9d8e125a091c14a174d">DECLARE_TRACER</a>(event)</div><div class="line"><a class="code" href="group__perfmonitoring.html#ga71dfca71859c724907b98210fe095ca8">INITIALIZE_TRACER</a>(event, <span class="stringliteral">&quot;event counter name&quot;</span>);</div><div class="line">Then later on...</div><div class="line">BEGIN_TRACEPOINT(event)</div><div class="line">... Do stuff ...</div><div class="line">END_TRACEPOINT(event)</div></div><!-- fragment --><p>There are some minor caveats. BEGIN_TRACEPOINT really declares a variable, so you must begin and end a tracepoint within the same scope, and you cannot call BEGIN_TRACEPOINT on the same event within the same scope.</p>
<p>At program termination the contents of the tracepoint will be emitted. It will print the number times the tracepoint is entered, the total program time spent in the tracepoint, as well as average, minimum and maximum time spent in the tracepoint. Note that the tracepoint is safe to use even when running in parallel. The total time spent in the tracepoint is hence the sum over all threads.</p>
<p>The tracepoint uses rdtsc for fast clock cycle counting, hence might be inaccurate on systems where rdtsc is not necessarily monotonic. </p>

<p class="definition">Definition at line <a class="el" href="tracepoint_8hpp_source.html#l00225">225</a> of file <a class="el" href="tracepoint_8hpp_source.html">tracepoint.hpp</a>.</p>

</div>
</div>
<a id="ga3031556c2f15625762cea2eba8da5cfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3031556c2f15625762cea2eba8da5cfe">&#9670;&nbsp;</a></span>END_AND_BEGIN_TRACEPOINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define END_AND_BEGIN_TRACEPOINT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">endname, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">beginname&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> __ ## beginname ## _trace_ = <a class="code" href="group__util.html#gae6071c25cb81f5d2e5a99b13a53e6b48">rdtsc</a>(); \</div><div class="line">                                                     endname.incorporate(__ ## beginname ## _trace_ - __ ## endname ## _trace_);</div><div class="ttc" id="group__util_html_gae6071c25cb81f5d2e5a99b13a53e6b48"><div class="ttname"><a href="group__util.html#gae6071c25cb81f5d2e5a99b13a53e6b48">turi::rdtsc</a></div><div class="ttdeci">rdtsc_type rdtsc(void)</div><div class="ttdef"><b>Definition:</b> <a href="timer_8hpp_source.html#l00199">timer.hpp:199</a></div></div>
</div><!-- fragment --><p>Ends the tracepoint with the name "endname" and begins a tracepoint with name "beginname". Conceptually equivalent to </p><div class="fragment"><div class="line"><a class="code" href="group__perfmonitoring.html#gae76212ebdb02ff153f156762c5b1b7fe">END_TRACEPOINT</a>(endname)</div><div class="line"><a class="code" href="group__perfmonitoring.html#ga27fd71c232b7f2463c22fd912e3a4b20">BEGIN_TRACEPOINT</a>(beginname)</div></div><!-- fragment --><p> but with slightly less overhead. </p>

<p class="definition">Definition at line <a class="el" href="tracepoint_8hpp_source.html#l00232">232</a> of file <a class="el" href="tracepoint_8hpp_source.html">tracepoint.hpp</a>.</p>

</div>
</div>
<a id="gae76212ebdb02ff153f156762c5b1b7fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae76212ebdb02ff153f156762c5b1b7fe">&#9670;&nbsp;</a></span>END_TRACEPOINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define END_TRACEPOINT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name</td><td>)</td>
          <td>&#160;&#160;&#160;name.incorporate(rdtsc() - __ ## name ## _trace_);</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ends a tracepoint; see <a class="el" href="group__perfmonitoring.html#ga27fd71c232b7f2463c22fd912e3a4b20">BEGIN_TRACEPOINT</a>. </p>

<p class="definition">Definition at line <a class="el" href="tracepoint_8hpp_source.html#l00231">231</a> of file <a class="el" href="tracepoint_8hpp_source.html">tracepoint.hpp</a>.</p>

</div>
</div>
<a id="ga71dfca71859c724907b98210fe095ca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga71dfca71859c724907b98210fe095ca8">&#9670;&nbsp;</a></span>INITIALIZE_TRACER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INITIALIZE_TRACER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">description&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;name.initialize(#name, description);</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the tracer created by <a class="el" href="group__perfmonitoring.html#ga268cd0a7e1c0c9d8e125a091c14a174d">DECLARE_TRACER</a> with a description. The object with name "name" created by DECLARE_TRACER must be in scope. This initializes the tracer "name" with a description, and configures the tracer to print when the tracer "name" is destroyed. </p>

<p class="definition">Definition at line <a class="el" href="tracepoint_8hpp_source.html#l00227">227</a> of file <a class="el" href="tracepoint_8hpp_source.html">tracepoint.hpp</a>.</p>

</div>
</div>
<a id="gae8ff52298ec1e31d044b4ae8cd53702f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae8ff52298ec1e31d044b4ae8cd53702f">&#9670;&nbsp;</a></span>INITIALIZE_TRACER_NO_PRINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INITIALIZE_TRACER_NO_PRINT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">description&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;name.initialize(#name, description, false);</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the tracer created by <a class="el" href="group__perfmonitoring.html#ga268cd0a7e1c0c9d8e125a091c14a174d">DECLARE_TRACER</a> with a description. The object with name "name" created by DECLARE_TRACER must be in scope. This initializes the tracer "name" with a description, and configures the tracer to NOT print when the tracer "name" is destroyed. </p>

<p class="definition">Definition at line <a class="el" href="tracepoint_8hpp_source.html#l00228">228</a> of file <a class="el" href="tracepoint_8hpp_source.html">tracepoint.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
