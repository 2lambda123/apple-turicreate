<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Turi Create: turi::sgraph_compute::sgraph_engine&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Turi Create
   &#160;<span id="projectnumber">4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classturi_1_1sgraph__compute_1_1sgraph__engine.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="classturi_1_1sgraph__compute_1_1sgraph__engine-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">turi::sgraph_compute::sgraph_engine&lt; T &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="sgraph__engine_8hpp_source.html">core/storage/sgraph_data/sgraph_engine.hpp</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br />
class turi::sgraph_compute::sgraph_engine&lt; T &gt;</h3>

<p>PowerGraph computation.</p>
<p>Two central graph computation operations are provided by this class:</p><ul>
<li>Vertex Gather</li>
<li>Parallel For Edges</li>
</ul>
<h3>Vertex Gather</h3>
<p>Given a graph, this class computes for each vertex, a generalized "sum" over neighborhood of each vertex. You need to define a function which is then given</p><ul>
<li>the data on the central vertex,</li>
<li>the data on the edge,</li>
<li>the data on the other vertex</li>
<li>The direction of the edge.</li>
</ul>
<p>The function then performs some computation and aggregates the result into a combiner.</p>
<p>Abstractly: </p><div class="fragment"><div class="line"><span class="keywordflow">for</span> v \in vertices:</div><div class="line">   output[v] = initial_value</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> v \in vertices:</div><div class="line">   <span class="keywordflow">for</span> u \in neighbor of v:</div><div class="line">     gather(data[v], data[v,u], data[u], edge_direction_of_v_u, output[v])</div><div class="line"></div><div class="line"><span class="keywordflow">return</span> output</div></div><!-- fragment --><p>At completion, a vector of shared_ptr to sarrays will be returned. Each sarray corresponds to one vertex partition, and each sarray row corresponds to the result of summing across the neighborhood of the vertex.</p>
<p>This is easiest to explain with an example. Pagerank for instance: </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> degree_idx = g.get_vertex_field_id(<span class="stringliteral">&quot;out_degree&quot;</span>);</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> pr_idx = g.get_vertex_field_id(<span class="stringliteral">&quot;pagerank&quot;</span>);</div><div class="line"></div><div class="line"><span class="comment">// declare a sgraph_engine computation object of a particular return type.</span></div><div class="line">sgraph_compute::sgraph_engine&lt;flexible_type&gt; ga;</div><div class="line"></div><div class="line">ret = ga.gather(g,</div><div class="line">    [=](<span class="keyword">const</span> graph_data_type&amp; center,</div><div class="line">        <span class="keyword">const</span> graph_data_type&amp; edge,</div><div class="line">        <span class="keyword">const</span> graph_data_type&amp; other,</div><div class="line">        edge_direction edgedir,</div><div class="line">        flexible_type&amp; combiner) {</div><div class="line">       combiner = combiner + (1-random_jump_prob) * (other[pr_idx] / other[degree_idx]);</div><div class="line">    },</div><div class="line">    flexible_type(random_jump_prob), <span class="comment">// initial value</span></div><div class="line">    edge_direction::IN_EDGE);        <span class="comment">// edges to sum over</span></div></div><!-- fragment --><h3>Parallel For Edges</h3>
<p>The parallel_for_edges() performs the following operations on the graph:</p>
<p>Abstractly: Given a function edge_map: (source_data, edge_data, target_data) -&gt; T, </p><div class="fragment"><div class="line"><span class="keywordflow">for</span> e \in edges:</div><div class="line">  output[e] = edge_map(e.source.data(), e.data(), e.target.data())</div></div><!-- fragment --><p>At completion it returns a vector of shared_ptr to sarrays. Each sarray corresponds to one edge partition, and each edge row corresponds to the result of the map operation over the edge.</p>
<dl class="section note"><dt>Note</dt><dd>Refactoring is required in the furture for this class. Essentially, this class should provide the mechanism to iterate over edges with vertex data properly loaded. Then the user facing "gather" and "parallel for edges" will be simple functions that uses this class. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sgraph__engine_8hpp_source.html#l00112">112</a> of file <a class="el" href="sgraph__engine_8hpp_source.html">sgraph_engine.hpp</a>.</p>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li>core/storage/sgraph_data/<a class="el" href="sgraph__engine_8hpp_source.html">sgraph_engine.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceturi.html">turi</a></li><li class="navelem"><a class="el" href="namespaceturi_1_1sgraph__compute.html">sgraph_compute</a></li><li class="navelem"><a class="el" href="classturi_1_1sgraph__compute_1_1sgraph__engine.html">sgraph_engine</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
