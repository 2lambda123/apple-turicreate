

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>turicreate.text_analytics.bm25 &mdash; Turi Create API 5.4 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
    <link rel="top" title="Turi Create API 5.4 documentation" href="../index.html"/>
        <link rel="up" title="text_analytics" href="../turicreate.toolkits.text_analytics.html"/>
        <link rel="next" title="turicreate.text_analytics.tf_idf" href="turicreate.text_analytics.tf_idf.html"/>
        <link rel="prev" title="turicreate.text_analytics.drop_words" href="turicreate.text_analytics.drop_words.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> Turi Create API</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../turicreate.data_structures.html">Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../turicreate.data_structures.html#id1">Data Structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../turicreate.data_structures.html#data-types">Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../turicreate.data_structures.html#utilities">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../turicreate.toolkits.html">Modelling</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../turicreate.toolkits.html#applications">Applications</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../turicreate.toolkits.html#essentials">Essentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../turicreate.toolkits.html#utilities">Utilities</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../turicreate.visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../turicreate.utils.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../turicreate.utils.html#logging">logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../turicreate.utils.html#runtime">runtime</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
      
        <span class="powered-by">
          <a id="footer-logo" href="https://github.com/apple/turicreate"><img src="../_static/tc_logo_white.png"/></a>
        </span>
      
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Turi Create API</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../turicreate.toolkits.html">Modelling</a> &raquo;</li>
      
          <li><a href="../turicreate.toolkits.text_analytics.html"><code class="docutils literal"><span class="pre">text_analytics</span></code></a> &raquo;</li>
      
    <li>turicreate.text_analytics.bm25</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="turicreate-text-analytics-bm25">
<h1>turicreate.text_analytics.bm25<a class="headerlink" href="#turicreate-text-analytics-bm25" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="turicreate.text_analytics.bm25">
<code class="descclassname">turicreate.text_analytics.</code><code class="descname">bm25</code><span class="sig-paren">(</span><em>dataset</em>, <em>query</em>, <em>k1=1.5</em>, <em>b=0.75</em><span class="sig-paren">)</span><a class="headerlink" href="#turicreate.text_analytics.bm25" title="Permalink to this definition">¶</a></dt>
<dd><p>For a given query and set of documents, compute the BM25 score for each
document. If we have a query with words q_1, ..., q_n the BM25 score for
a document is:</p>
<blockquote>
<div><div class="math">
\[\sum_{i=1}^N IDF(q_i)\frac{f(q_i) * (k_1+1)}{f(q_i) + k_1 * (1-b+b*|D|/d_avg))}\]</div>
</div></blockquote>
<p>where</p>
<ul class="simple">
<li><span class="math">\(\mbox{IDF}(q_i) = log((N - n(q_i) + .5)/(n(q_i) + .5)\)</span></li>
<li><span class="math">\(f(q_i)\)</span> is the number of times q_i occurs in the document</li>
<li><span class="math">\(n(q_i)\)</span> is the number of documents containing q_i</li>
<li><span class="math">\(|D|\)</span> is the number of words in the document</li>
<li><span class="math">\(d_avg\)</span> is the average number of words per document in the corpus</li>
<li><span class="math">\(k_1\)</span> and <span class="math">\(b\)</span> are free parameters.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>dataset</strong> <span class="classifier-delimiter">:</span> <span class="classifier">SArray of type dict, list, or str</span></dt>
<dd><p class="first">An SArray where each element either represents a document in:</p>
<ul class="last simple">
<li><strong>dict</strong> : a bag-of-words format, where each key is a word and each
value is the number of times that word occurs in the document.</li>
<li><strong>list</strong> : The list is converted to bag of words of format, where the
keys are the unique elements in the list and the values are the counts
of those unique elements. After this step, the behaviour is identical
to dict.</li>
<li><strong>string</strong> : Behaves identically to a <strong>dict</strong>, where the dictionary
is generated by converting the string into a bag-of-words format.
For example, &#8216;I really like really fluffy dogs&#8221; would get converted
to {&#8216;I&#8217; : 1, &#8216;really&#8217;: 2, &#8216;like&#8217;: 1, &#8216;fluffy&#8217;: 1, &#8216;dogs&#8217;:1}.</li>
</ul>
</dd>
<dt><strong>query</strong> <span class="classifier-delimiter">:</span> <span class="classifier">A list, set, or SArray of type str</span></dt>
<dd><p class="first last">A list, set or SArray where each element is a word.</p>
</dd>
<dt><strong>k1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Free parameter which controls the relative importance of term
frequencies. Recommended values are [1.2, 2.0].</p>
</dd>
<dt><strong>b</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">Free parameter which controls how much to downweight scores for long
documents. Recommended value is 0.75.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>out</strong> <span class="classifier-delimiter">:</span> <span class="classifier">SFrame</span></dt>
<dd><p class="first last">An SFrame containing the BM25 score for each document containing one of
the query words. The doc_id column is the row number of the document.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r8fba3939f149-bm25" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[BM25]</a></td><td><a class="reference external" href="http://en.wikipedia.org/wiki/Okapi_BM25">&#8220;Okapi BM-25&#8221;</a></td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">turicreate</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">turicreate</span><span class="o">.</span><span class="n">SArray</span><span class="p">([</span>
<span class="go">  {&#39;a&#39;:5, &#39;b&#39;:7, &#39;c&#39;:10},</span>
<span class="go">  {&#39;a&#39;:3, &#39;c&#39;:1, &#39;d&#39;:2},</span>
<span class="go">  {&#39;a&#39;:10, &#39;b&#39;:3, &#39;e&#39;:5},</span>
<span class="go">  {&#39;a&#39;:1},</span>
<span class="go">  {&#39;f&#39;:5}])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">query</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">turicreate</span><span class="o">.</span><span class="n">text_analytics</span><span class="o">.</span><span class="n">bm25</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="turicreate.text_analytics.tf_idf.html" class="btn btn-neutral float-right" title="turicreate.text_analytics.tf_idf">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="turicreate.text_analytics.drop_words.html" class="btn btn-neutral" title="turicreate.text_analytics.drop_words"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      Last updated on Mar 27, 2019.
    </p>
  </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'5.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>